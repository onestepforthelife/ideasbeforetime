<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit System Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        button {
            background: #5a6c7d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #5568d3;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            background: #e7f3ff;
        }
    </style>
    <link rel="stylesheet" href="common-watermark.css">
</head>
<body>
    <div class="test-container">
        <h1>üß™ Credit System Test</h1>
        
        <div class="test-section">
            <h3>Current Status</h3>
            <div class="status">
                <strong>Credits:</strong> <span id="testCredits">Loading...</span><br>
                <strong>Timer:</strong> <span id="testTimer">Stopped</span><br>
                <strong>Total Purchased:</strong> <span id="testTotal">0</span>
            </div>
        </div>
        
        <div class="test-section">
            <h3>Test Actions</h3>
            <button onclick="testAddCredits(1000)">Add 1000s (Test)</button>
            <button onclick="testAddCredits(4000)">Add 4000s (Test)</button>
            <button onclick="testStartTimer()">Start Timer</button>
            <button onclick="testStopTimer()">Stop Timer</button>
            <button onclick="testClearCredits()">Clear All Credits</button>
            <button onclick="testShowModal()">Show Buy Modal</button>
        </div>
        
        <div class="test-section">
            <h3>Package Prices</h3>
            <ul>
                <li>Starter: ‚Çπ299 for 1000s (16m 40s)</li>
                <li>Pro: ‚Çπ999 for 4000s (1h 6m) ‚≠ê</li>
                <li>Unlimited: ‚Çπ2199 for 10000s (2h 46m)</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>Console Log</h3>
            <div id="consoleLog" style="background: #000; color: #0f0; padding: 15px; border-radius: 5px; font-family: monospace; max-height: 200px; overflow-y: auto;">
                Waiting for actions...
            </div>
        </div>
    </div>
    
    <!-- Load Credit System -->
    <script src="job-credits-system.js"></script>
    
    <script>
        function log(msg) {
            const logDiv = document.getElementById('consoleLog');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `\n[${time}] ${msg}`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function updateStatus() {
            document.getElementById('testCredits').textContent = creditSystem.formatTime(creditSystem.remainingSeconds);
            document.getElementById('testTimer').textContent = creditSystem.isActive ? 'Running ‚è±Ô∏è' : 'Stopped ‚è∏Ô∏è';
            document.getElementById('testTotal').textContent = creditSystem.formatTime(creditSystem.totalPurchased);
        }
        
        function testAddCredits(seconds) {
            creditSystem.addCredits(seconds);
            log(`‚úÖ Added ${seconds} seconds`);
            updateStatus();
        }
        
        function testStartTimer() {
            const started = creditSystem.startTimer();
            if (started) {
                log('‚ñ∂Ô∏è Timer started');
            } else {
                log('‚ùå No credits - cannot start');
            }
            updateStatus();
        }
        
        function testStopTimer() {
            creditSystem.stopTimer();
            log('‚è∏Ô∏è Timer stopped');
            updateStatus();
        }
        
        function testClearCredits() {
            localStorage.removeItem('jobToolCredits');
            creditSystem.loadCredits();
            log('üóëÔ∏è All credits cleared');
            updateStatus();
        }
        
        function testShowModal() {
            creditSystem.showBuyCreditsModal();
            log('üí≥ Buy modal opened');
        }
        
        // Update status every second
        setInterval(updateStatus, 1000);
        
        // Initial status
        updateStatus();
        log('üöÄ Test page loaded');
        log(`üìä Current credits: ${creditSystem.formatTime(creditSystem.remainingSeconds)}`);
    </script>
    
    <!-- Load Credit UI (for modal) -->
    <div id="creditUIContainer"></div>
    <script>
        fetch('job-credits-ui.html')
            .then(r => r.text())
            .then(html => {
                document.getElementById('creditUIContainer').innerHTML = html;
                log('‚úÖ Credit UI loaded');
            })
            .catch(e => {
                log('‚ùå Failed to load Credit UI: ' + e.message);
            });
    </script>
    <script src="common-navigation.js"></script>
    <script src="universal-analytics.js"></script>
<script src="common-footer.js"></script>
</body>
</html>

